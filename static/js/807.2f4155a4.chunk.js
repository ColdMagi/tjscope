"use strict";(self.webpackChunktjscope=self.webpackChunktjscope||[]).push([[807],{5807:function(e,n,s){s.r(n),s.d(n,{default:function(){return Y}});var r=s(9439),t=s(9712),i=s(7549),l=s(2791),a=s(3504),d=s(3859),o=s(7762),u=s(1197),c=s(5443),x=s(9683),h=s(184);var v=function(e){var n=e.data,s=n.years,r=n.months,i=n.days,l=n.hours,a=n.ratingByEntity,d=e.options;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0433\u043e\u0434\u0430\u043c"}),(0,h.jsx)(x.$Q,{data:s,options:d})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"}),(0,h.jsx)(x.$Q,{data:r,options:d})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0434\u043d\u044f\u043c"}),(0,h.jsx)(x.$Q,{data:i,options:d})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0447\u0430\u0441\u0430\u043c"}),(0,h.jsx)(x.Fk,{data:l,options:d})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041e\u0446\u0435\u043d\u043a\u0438"}),(0,h.jsx)(x.x1,{data:a})]})]})},j=s(1413),m=s(4925),f=s(2157),p=s(4828),g=s(2804),b=function(e){var n=e.count,s=e.summ,r=s,t=n-r;return s<0&&(t=(r=Math.abs(n-(n-s)/2))+-1*s),{minus:t,plus:r}},y=["url","hitsCount","intro","date","likes","cover","subsite","title","blocks"];function Z(e){var n=e.data.markdown;return(0,h.jsx)(t.xu,{p:"3",rounded:"lg",borderColor:"gray.300",borderWidth:"1px",children:n})}var k=function(e){var n=e.entry,s=n.url,r=n.hitsCount,i=n.intro,l=n.date,a=n.likes,d=a.count,o=a.summ,u=n.cover,c=n.subsite,x=c.avatar_url,v=c.name,k=n.title,w=n.blocks,C=((0,m.Z)(n,y),b({count:d,summ:o})),N=C.minus,z=C.plus;return(0,h.jsxs)(t.gC,{align:"flex-start",as:"a",href:s,rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(f.qE,{size:"xs",src:x,name:v}),(0,h.jsx)(t.X6,{size:"sm",children:v})]}),(0,h.jsx)(t.xv,{color:"gray.400",as:"time",children:(0,g.Z)(1e3*l,"dd.LL.yy")})]}),(0,h.jsxs)(t.gC,{pl:"8",children:[k&&(0,h.jsx)(t.X6,{size:"sm",children:k}),(0,h.jsx)(t.xv,{children:i}),u&&(0,h.jsx)(p.Ee,{src:u.thumbnailUrl,alt:"",objectFit:"contain",pointerEvents:"none"}),w&&w[0]&&"tweet"===w[0].type&&(0,h.jsx)(Z,(0,j.Z)({},w[0]))]}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.xv,{pl:"8",color:"gray.400",children:[r," \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"]}),(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(t.xv,{color:"red.300",children:N}),(0,h.jsx)(t.xv,{color:"green.300",children:z})]})]})]})};var w=function(e){var n=e.label,s=void 0===n?"\u0420\u0435\u0439\u0442\u0438\u043d\u0433":n,r=e.children;return(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:s}),(0,h.jsx)(c.Jf,{color:"gray.500",children:r})]})};var C=function(e){var n=e.label,s=e.children;return(0,h.jsxs)(t.gC,{align:"flex-start",minW:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:n}),s]})},N=s(3433);function z(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={0:0,1:0,2:0,3:0,4:0,5:0,6:0},t=(0,j.Z)((0,j.Z)({},r),{},{7:0,8:0,9:0,10:0,11:0}),i={years:{},months:(0,j.Z)({},t),days:(0,j.Z)({},r),hours:(0,j.Z)((0,j.Z)({},r),{},{12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0}),ratingByEntity:{}},l=(0,o.Z)((null===e||void 0===e?void 0:e.result)||[]);try{for(l.s();!(n=l.n()).done;){var a=n.value,u=new Date(1e3*a.date),c=u.getUTCFullYear(),x=u.getUTCMonth(),h=u.getUTCDay(),v=u.getUTCHours();i.years[c]=(i.years[c]||0)+1,i.months[x]=(i.months[x]||0)+1,i.days[h]=(i.days[h]||0)+1,i.hours[v]=(i.hours[v]||0)+1,i.ratingByEntity[a.id]=b(a.likes)}}catch(f){l.e(f)}finally{l.f()}var m=(0,N.Z)(Object.values(i.ratingByEntity));return{years:{datasets:[(0,j.Z)({data:(0,N.Z)(Object.values(i.years))},s)],labels:(0,N.Z)(Object.keys(i.years))},months:{datasets:[(0,j.Z)({data:(0,N.Z)(Object.values(i.months))},s)],labels:(0,N.Z)((0,d.w)())},days:{datasets:[(0,j.Z)({data:(0,N.Z)(Object.values(i.days))},s)],labels:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},hours:{datasets:[(0,j.Z)({data:(0,N.Z)(Object.values(i.hours))},s)],labels:(0,N.Z)(Object.keys(i.hours))},ratingByEntity:{datasets:[{data:(0,N.Z)(m.map((function(e){return e.minus}))),label:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(229,62,62, 0.2)",borderColor:"rgb(229,62,62)",borderWidth:1},{data:(0,N.Z)(m.map((function(e){return e.plus}))),label:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(72,187,120, 0.2)",borderColor:"rgb(72,187,120)",borderWidth:1}],labels:(0,N.Z)(Object.keys(i.ratingByEntity))}}}var W=function(e){var n=e.data,s=(0,l.useMemo)((function(){var e,s={rating:0,ratingPlus:0,ratingMinus:0,comments:0,reposts:0,hits:0,mostHits:((null===n||void 0===n?void 0:n.result)||[])[0],mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,o.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value,i=b(t.likes),l=i.minus,a=i.plus;s.rating+=a-l,s.ratingPlus+=a,s.ratingMinus+=l,s.comments+=t.commentsCount,s.reposts+=Number(t.isRepost),s.hits+=t.hitsCount;var d=b(s.mostLiked.likes).plus,u=b(s.mostDisliked.likes).minus;t.hitsCount>s.mostHits.hitsCount&&(s.mostHits=t),a>d&&(s.mostLiked=t),l>u&&(s.mostDisliked=t)}}catch(c){r.e(c)}finally{r.f()}return s}),[n]),r=(0,u.Bs)({plugins:{legend:{display:!1}}}),a=(0,u.Bs)({borderColor:"rgb(237,137,54)",backgroundColor:"rgba(237,137,54,0.4)",borderWidth:1}),d=z(n||{},a);return(0,h.jsxs)(i.mQ,{variant:"enclosed",isFitted:!0,w:"100%",children:[(0,h.jsxs)(i.td,{w:"100%",children:[(0,h.jsx)(i.OK,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,h.jsx)(i.OK,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]}),(0,h.jsxs)(i.nP,{w:"100%",children:[(0,h.jsx)(i.x4,{children:(0,h.jsxs)(t.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,h.jsxs)(t.MI,{columns:{base:2,md:3},spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:s.rating}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043e\u043a [+]",children:s.ratingPlus}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [-]",children:s.ratingMinus}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,h.jsx)(c.Jf,{children:s.comments})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:s.hits})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u0420\u0435\u043f\u043e\u0441\u0442\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:s.reposts})]})]}),s.mostHits&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0439",children:(0,h.jsx)(k,{entry:s.mostHits})}),s.mostLiked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,h.jsx)(k,{entry:s.mostLiked})}),s.mostDisliked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,h.jsx)(k,{entry:s.mostDisliked})})]})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(v,{data:d,options:r})})]})]})};var O=function(e){var n=e.comment,s=n.author,r=s.avatar_url,i=s.name,l=n.date,a=n.likes,d=a.count,o=a.summ,u=n.id,c=n.entry.url,x=n.html,v=b({count:d,summ:o}),j=v.minus,m=v.plus;return(0,h.jsxs)(t.gC,{align:"flex-start",as:"a",href:c+"?comment=".concat(u),rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(f.qE,{size:"xs",src:r,name:i}),(0,h.jsx)(t.X6,{size:"sm",children:i})]}),(0,h.jsx)(t.xv,{color:"gray.400",as:"time",children:(0,g.Z)(1e3*l,"dd.LL.yy")})]}),(0,h.jsx)(t.gC,{pl:"8",children:(0,h.jsx)(t.xv,{dangerouslySetInnerHTML:{__html:x}})}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)("span",{}),(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(t.xv,{color:"red.300",children:j}),(0,h.jsx)(t.xv,{color:"green.300",children:m})]})]})]})};var M=function(e){var n=e.data,s=(0,l.useMemo)((function(){var e,s={rating:0,ratingPlus:0,ratingMinus:0,mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,o.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value,i=b(t.likes),l=i.plus,a=i.minus;s.rating+=l-a,s.ratingPlus+=l,s.ratingMinus+=a;var d=b(s.mostLiked.likes).plus,u=b(s.mostDisliked.likes).minus;l>d&&(s.mostLiked=t),a>u&&(s.mostDisliked=t)}}catch(c){r.e(c)}finally{r.f()}return s}),[n]),r=(0,u.Bs)({plugins:{legend:{display:!1}}}),a=(0,u.Bs)({borderColor:"rgb(49,130,206)",backgroundColor:"rgba(49,130,206,0.4)",borderWidth:1}),d=z(n||{},a);return(0,h.jsxs)(i.mQ,{variant:"enclosed",isFitted:!0,w:"100%",children:[(0,h.jsxs)(i.td,{children:[(0,h.jsx)(i.OK,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,h.jsx)(i.OK,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]}),(0,h.jsxs)(i.nP,{children:[(0,h.jsx)(i.x4,{children:(0,h.jsxs)(t.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,h.jsxs)(t.MI,{columns:3,spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:s.rating}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043e\u043a [+]",children:s.ratingPlus}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [-]",children:s.ratingMinus})]}),s.mostLiked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,h.jsx)(O,{comment:s.mostLiked})}),s.mostDisliked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,h.jsx)(O,{comment:s.mostDisliked})})]})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(v,{data:d,options:r})})]})]})},_=s(7552);var T=function(e){var n=e.name,s=e.avatar_url,r=e.id,i=e.children,l=e.size,a=void 0===l?"md":l;return(0,h.jsxs)(t.Ug,{as:"a",href:"https://tjournal.ru/u/".concat(r),target:"_blank",children:[(0,h.jsx)(f.qE,{size:a,name:n,src:s}),(0,h.jsx)(t.xv,{fontSize:"md"===a?"18px":"14px",as:"b",maxW:{base:"150px",md:"180px",lg:"200px"},textOverflow:"ellipsis",overflow:"hidden",children:n}),i]})},E=["label","name","avatar_url","id"];function L(e){var n,s=e.plus,r=e.minus;return(0,h.jsxs)(t.Ug,{spacing:2,children:[(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"green.300",children:s}),(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"red.300",children:r}),(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"gray.500",children:null!==(n=s+r)&&void 0!==n?n:"N/A"})]})}var U=function(e){var n=e.label,s=e.name,r=e.avatar_url,t=e.id,i=(0,m.Z)(e,E);return(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:n}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(T,{name:s,avatar_url:r,id:t})}),(0,h.jsx)(c.vh,{pl:"14",children:(0,h.jsx)(L,(0,j.Z)({},i))})]})},J=s(1089);var D=function(e){var n=e.likers;return(0,h.jsx)(J.xJ,{children:(0,h.jsxs)(J.iA,{variant:"simple",size:{base:"sm",md:"md",lg:"lg"},children:[(0,h.jsx)(J.Rn,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0446\u0435\u043d\u043e\u043a \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c"}),(0,h.jsx)(J.hr,{children:(0,h.jsxs)(J.Tr,{children:[(0,h.jsx)(J.Th,{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,h.jsx)(J.Th,{isNumeric:!0,color:"green.300",children:"+"}),(0,h.jsx)(J.Th,{isNumeric:!0,color:"red.300",children:"-"}),(0,h.jsx)(J.Th,{isNumeric:!0,children:"\u0412\u0441\u0435\u0433\u043e"})]})}),(0,h.jsx)(J.p3,{children:(0,N.Z)(Object.entries(n)).sort((function(e,n){var s=(0,r.Z)(e,2),t=(s[0],s[1]),i=(0,r.Z)(n,2),l=(i[0],i[1]);return l.plus+l.minus-(t.plus+t.minus)})).map((function(e){var n=(0,r.Z)(e,2),s=n[0],t=n[1],i=t.name,l=t.avatar_url,a=t.minus,d=t.plus;return(0,h.jsxs)(J.Tr,{children:[(0,h.jsx)(J.Td,{children:(0,h.jsx)(T,{name:i,avatar_url:l,id:s})}),(0,h.jsx)(J.Td,{children:d}),(0,h.jsx)(J.Td,{children:a}),(0,h.jsx)(J.Td,{children:a+d})]},s)}))})]})})},X=s(4165),S=s(5861),P="https://api.tjournal.ru/v2.31",A=(0,l.createContext)(P),B=function(){return(0,l.useContext)(A)};function F(e,n){var s=(0,l.useRef)({}),t=(0,l.useRef)(!1),i={error:void 0,data:void 0},a=(0,l.useReducer)((function(e,n){switch(n.type){case"loading":return(0,j.Z)({},i);case"fetched":return(0,j.Z)((0,j.Z)({},i),{},{data:n.payload});case"error":return(0,j.Z)((0,j.Z)({},i),{},{error:n.payload});default:return e}}),i),d=(0,r.Z)(a,2),o=d[0],u=d[1];return(0,l.useEffect)((function(){if(e&&!e.includes("undefined")){t.current=!1;var r=function(){var r=(0,S.Z)((0,X.Z)().mark((function r(){var i,l;return(0,X.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u({type:"loading"}),!s.current[e]){r.next=4;break}return u({type:"fetched",payload:s.current[e]}),r.abrupt("return");case 4:return r.prev=4,r.next=7,fetch(e,n);case 7:if((i=r.sent).ok){r.next=10;break}throw new Error(i.statusText);case 10:return r.next=12,i.json();case 12:if(l=r.sent,s.current[e]=l,!t.current){r.next=16;break}return r.abrupt("return");case 16:u({type:"fetched",payload:l}),r.next=24;break;case 19:if(r.prev=19,r.t0=r.catch(4),!t.current){r.next=23;break}return r.abrupt("return");case 23:u({type:"error",payload:r.t0});case 24:case"end":return r.stop()}}),r,null,[[4,19]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){t.current=!0}}}),[e]),o}function I(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2.31",r=B();return F(e?"".concat(r.replace("2.31",s)).concat(e):e,n)}function K(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2.31",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=(0,l.useState)({result:[]}),a=(0,r.Z)(i,2),d=a[0],o=a[1],u=(0,l.useState)(0),c=(0,r.Z)(u,2),x=c[0],h=c[1],v=I(e+"?count=".concat(t,"&offset=").concat(x),n,s),m=v.data;return(0,l.useEffect)((function(){if(m&&(o((function(e){return(0,j.Z)((0,j.Z)((0,j.Z)({},e),m),{},{result:[].concat((0,N.Z)(e.result),(0,N.Z)(m.result))})})),m.result.length>=t)){var e=setTimeout((function(){return h((function(e){return e+t}))}),2e3);return function(){return clearTimeout(e)}}}),[m,t]),d}var H=function(e){var n,s,i,a=e.comments,d=(0,l.useState)({}),o=(0,r.Z)(d,2),u=o[0],c=o[1],x=(0,l.useState)(0),v=(0,r.Z)(x,2),m=v[0],f=v[1],p=I("/comment/likers/".concat(null===(n=((null===a||void 0===a?void 0:a.result)||[])[m])||void 0===n?void 0:n.id),void 0,"1.9").data,g=(0,l.useMemo)((function(){for(var e={plus:(0,j.Z)((0,j.Z)({},u[0]||{plus:0}),{},{id:"0"}),minus:(0,j.Z)((0,j.Z)({},u[0]||{minus:0}),{},{id:"0"}),total:(0,j.Z)((0,j.Z)({},u[0]||{plus:0,minus:0}),{},{id:"0"})},n=0,s=Object.entries(u);n<s.length;n++){var t=(0,r.Z)(s[n],2),i=t[0],l=t[1];l.minus>e.minus.minus&&(e.minus=(0,j.Z)((0,j.Z)({},l),{},{id:i})),l.plus>e.plus.plus&&(e.plus=(0,j.Z)((0,j.Z)({},l),{},{id:i})),l.plus+l.minus>e.total.plus+e.total.minus&&(e.total=(0,j.Z)((0,j.Z)({},l),{},{id:i}))}return e}),[u]);return(0,l.useEffect)((function(){if(p){c((function(e){for(var n=(0,j.Z)({},e),s=0,t=Object.entries(p.result);s<t.length;s++){var i=(0,r.Z)(t[s],2),l=i[0],a=i[1];Reflect.has(n,l)||(n[l]={minus:0,plus:0,avatar_url:"",name:""}),n[l].minus+=Number(a.sign<0),n[l].plus+=Number(a.sign>0),n[l].avatar_url=a.avatar_url,n[l].name=a.name}return n}));var e=setTimeout((function(){return f((function(e){return e+1}))}),2e3);return function(){return clearTimeout(e)}}}),[p]),(0,h.jsxs)(t.gC,{position:"relative",children:[(null===a||void 0===a||null===(s=a.result)||void 0===s?void 0:s.length)>m&&(0,h.jsx)(_.Ex,{size:"xs",isIndeterminate:!0,w:"100%"}),(0,h.jsxs)(t.MI,{columns:{md:2,base:1},spacing:5,justifyContent:"space-between",minW:"100%",children:[!!+g.plus.id&&(0,h.jsx)(U,(0,j.Z)((0,j.Z)({},g.plus),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043f\u043b\u044e\u0441\u043e\u0432"})),!!+g.minus.id&&(0,h.jsx)(U,(0,j.Z)((0,j.Z)({},g.minus),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432"})),!!+g.total.id&&(0,h.jsx)(U,(0,j.Z)((0,j.Z)({},g.total),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0446\u0435\u043d\u043e\u043a"}))]}),(null===a||void 0===a||null===(i=a.result)||void 0===i?void 0:i.length)<=m&&(0,h.jsx)(D,{likers:u})]})};var Q=function(e){var n=e.value;return(0,h.jsx)(h.Fragment,{children:n?"\u0414\u0430":"\u041d\u0435\u0442"})};var R=function(e){var n,s,r,i,l,a,d,o,u,x,v=e.subsite,j=e.entries,m=e.comments;return(0,h.jsxs)(t.gC,{divider:(0,h.jsx)(t.cX,{}),children:[(0,h.jsxs)(t.MI,{columns:{base:2,sm:4},spacing:3,justifyContent:"space-between",w:"100%",children:[(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0441\u0442\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(n=null!==(s=null===v||void 0===v||null===(r=v.counters)||void 0===r?void 0:r.entries)&&void 0!==s?s:j)&&void 0!==n?n:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(i=null!==(l=null===v||void 0===v||null===(a=v.counters)||void 0===a?void 0:a.comments)&&void 0!==l?l:m)&&void 0!==i?i:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}),(0,h.jsx)(c.Jf,{children:null!==(d=null===v||void 0===v||null===(o=v.counters)||void 0===o?void 0:o.subscriptions)&&void 0!==d?d:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(u=null===v||void 0===v||null===(x=v.counters)||void 0===x?void 0:x.subscribers)&&void 0!==u?u:"N/A"})]})]}),(0,h.jsxs)(t.MI,{columns:2,spacing:3,justifyContent:"space-between",w:"100%",children:[(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"Plus"}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(Q,{value:null===v||void 0===v?void 0:v.isPlus})})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(Q,{value:null===v||void 0===v?void 0:v.isVerified})})]})]})]})},q=s(811);var $=function(e){var n,s,r,i,l,a,d=e.subsite,o=e.avatar_url,u=e.rating;return(0,h.jsxs)(t.Ug,{spacing:{base:5,sm:8,md:10},position:"sticky",top:"0",bg:"white",zIndex:"1000",pt:"5",pb:"2",px:{base:2,sm:3,md:4},w:"100%",justifyContent:"center",children:[(0,h.jsx)(f.qE,{name:d.name,size:{base:"xl",md:"2xl"},src:null!==d&&void 0!==d&&null!==(n=d.avatar)&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.uuid?"https://leonardo.osnova.io/".concat(null===d||void 0===d||null===(r=d.avatar)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.uuid,"/-/scale_crop/300x300/-/format/webp/"):o}),(0,h.jsxs)(t.gC,{children:[(0,h.jsx)(t.X6,{size:{base:"md",sm:"lg"},children:d.name}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:null!==(l=null!==(a=d.rating)&&void 0!==a?a:u)&&void 0!==l?l:"N/A"}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u0421\u043e\u0437\u0434\u0430\u043d"}),(0,h.jsx)(c.Jf,{children:(0,q.Z)(d.created)?(0,g.Z)(1e3*d.created,"dd.LL.yy"):"N/A"})]})]})]})]})};var V=function(e){var n,s,r,t,i,l,a=I("/subsite?id=".concat(e)),d=a.data,o=a.error,u=K("/user/".concat(e,"/entries"),void 0,"1.9"),c=K("/user/".concat(e,"/comments"),void 0,"1.9");return{subsite:(d||{result:{subsite:{name:(null===c||void 0===c||null===(n=c.result)||void 0===n||null===(s=n.at(0))||void 0===s||null===(r=s.author)||void 0===r?void 0:r.name)||(null===u||void 0===u||null===(t=u.result)||void 0===t||null===(i=t.at(0))||void 0===i||null===(l=i.author)||void 0===l?void 0:l.name)}}}).result.subsite,subsiteError:o,entries:u,comments:c}};var Y=function(){var e,n,s,o,u,c,x,v,j,m,f,p,g=(0,a.lr)(),b=(0,r.Z)(g,1)[0],y=(0,d.s)(b.get("id")||""),Z=V(y),k=Z.subsite,w=Z.subsiteError,C=Z.entries,N=Z.comments,z=(0,l.useMemo)((function(){var e;return null===C||void 0===C||null===(e=C.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[C]),O=(0,l.useMemo)((function(){var e;return null===N||void 0===N||null===(e=N.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[N]);return(0,h.jsxs)(t.gC,{children:[w&&(0,h.jsxs)(t.gC,{align:"start",children:[(0,h.jsxs)(t.X6,{children:["\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u043a\u0440\u044b\u0442"," ",!(null!==N&&void 0!==N&&null!==(e=N.result)&&void 0!==e&&e.length||null!==C&&void 0!==C&&null!==(n=C.result)&&void 0!==n&&n.length)&&(0,h.jsx)(h.Fragment,{children:"\u0438\u043b\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})]}),(0,h.jsx)(t.xv,{fontSize:"12px",color:"gray.500",children:"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u043d\u044b \u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0447\u0435\u0442\u0430"})]}),(0,h.jsx)($,{subsite:k,avatar_url:(null===k||void 0===k||null===(s=k.avatar)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.url)||(null===N||void 0===N||null===(u=N.result)||void 0===u||null===(c=u.at(0))||void 0===c||null===(x=c.author)||void 0===x?void 0:x.avatar_url)||(null===C||void 0===C||null===(v=C.result)||void 0===v||null===(j=v.at(0))||void 0===j||null===(m=j.author)||void 0===m?void 0:m.avatar_url),rating:z+O}),(0,h.jsxs)(i.mQ,{variant:"soft-rounded",size:{base:"sm",md:"md"},maxW:"100%",w:"100%",children:[(0,h.jsxs)(i.td,{minW:"0",maxW:"100%",overflowX:"auto",sx:{scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},WebkitOverflowScrolling:"touch"},px:"1",children:[(0,h.jsx)(i.OK,{children:"\u041e\u0431\u0437\u043e\u0440"}),(0,h.jsx)(i.OK,{children:"\u041f\u043e\u0441\u0442\u044b"}),(0,h.jsx)(i.OK,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),(0,h.jsx)(i.OK,{children:"\u0418\u0442\u043e\u0433"})]}),(0,h.jsxs)(i.nP,{children:[(0,h.jsx)(i.x4,{children:(0,h.jsx)(R,{subsite:k,entries:null===C||void 0===C||null===(f=C.result)||void 0===f?void 0:f.length,comments:null===N||void 0===N||null===(p=N.result)||void 0===p?void 0:p.length})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(W,{data:C})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(M,{data:N})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(H,{comments:N})})]})]})]})}},3859:function(e,n,s){s.d(n,{s:function(){return r},w:function(){return t}});var r=function(e){return+(/(?:u\/)?(\d+)/.exec(e||"")||[])[1]||0},t=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}}}]);
//# sourceMappingURL=807.2f4155a4.chunk.js.map