"use strict";(self.webpackChunktjscope=self.webpackChunktjscope||[]).push([[482],{4482:function(e,n,s){s.r(n),s.d(n,{default:function(){return R}});var r=s(9439),t=s(3433),i=s(1413),l=s(7762),a=s(9712),o=s(5443),d=s(1197),u=s(7549),c=s(2157),x=s(1089),h=s(7552),m=s(184);var j=function(e){var n=e.value;return(0,m.jsx)(m.Fragment,{children:n?"\u0414\u0430":"\u041d\u0435\u0442"})},v=s(2804);var f=function(e){var n=e.comment,s=n.author,r=s.avatar_url,t=s.name,i=n.date,l=n.likes,o=l.count,d=l.summ,u=n.id,x=n.entry.url,h=n.html;return(0,m.jsxs)(a.gC,{align:"flex-start",as:"a",href:x+"?comment=".concat(u),rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,m.jsxs)(a.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,m.jsxs)(a.Ug,{children:[(0,m.jsx)(c.qE,{size:"xs",src:r,name:t}),(0,m.jsx)(a.X6,{size:"sm",children:t})]}),(0,m.jsx)(a.xv,{color:"gray.400",as:"time",children:(0,v.Z)(1e3*i,"dd.LL.yy")})]}),(0,m.jsx)(a.gC,{pl:"8",children:(0,m.jsx)(a.xv,{dangerouslySetInnerHTML:{__html:h}})}),(0,m.jsxs)(a.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,m.jsx)("span",{}),(0,m.jsxs)(a.Ug,{children:[(0,m.jsx)(a.xv,{color:"red.300",children:o-d}),(0,m.jsx)(a.xv,{color:"green.300",children:d})]})]})]})},g=s(4828);var p=function(e){var n=e.entry,s=n.url,r=n.hitsCount,t=n.intro,i=n.date,l=n.likes,o=l.count,d=l.summ,u=n.cover,x=n.subsite,h=x.avatar_url,j=x.name;return(0,m.jsxs)(a.gC,{align:"flex-start",as:"a",href:s,rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,m.jsxs)(a.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,m.jsxs)(a.Ug,{children:[(0,m.jsx)(c.qE,{size:"xs",src:h,name:j}),(0,m.jsx)(a.X6,{size:"sm",children:j})]}),(0,m.jsx)(a.xv,{color:"gray.400",as:"time",children:(0,v.Z)(1e3*i,"dd.LL.yy")})]}),(0,m.jsxs)(a.gC,{pl:"8",children:[(0,m.jsx)(a.xv,{children:t}),u&&(0,m.jsx)(g.Ee,{src:u.thumbnailUrl,alt:"",objectFit:"contain",pointerEvents:"none"})]}),(0,m.jsxs)(a.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,m.jsxs)(a.xv,{pl:"8",color:"gray.400",children:[r," \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"]}),(0,m.jsxs)(a.Ug,{children:[(0,m.jsx)(a.xv,{color:"red.300",children:o-d}),(0,m.jsx)(a.xv,{color:"green.300",children:d})]})]})]})};var b=function(e){var n=e.label,s=void 0===n?"\u0420\u0435\u0439\u0442\u0438\u043d\u0433":n,r=e.children;return(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:s}),(0,m.jsx)(o.Jf,{color:"gray.500",children:r})]})},k=s(811),y=s(4165),Z=s(5861),w=s(2791),C="https://api.tjournal.ru/v2.31",N=(0,w.createContext)(C),_=function(){return(0,w.useContext)(N)};function z(e,n){var s=(0,w.useRef)({}),t=(0,w.useRef)(!1),l={error:void 0,data:void 0},a=(0,w.useReducer)((function(e,n){switch(n.type){case"loading":return(0,i.Z)({},l);case"fetched":return(0,i.Z)((0,i.Z)({},l),{},{data:n.payload});case"error":return(0,i.Z)((0,i.Z)({},l),{},{error:n.payload});default:return e}}),l),o=(0,r.Z)(a,2),d=o[0],u=o[1];return(0,w.useEffect)((function(){if(e&&!e.includes("undefined")){t.current=!1;var r=function(){var r=(0,Z.Z)((0,y.Z)().mark((function r(){var i,l;return(0,y.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u({type:"loading"}),!s.current[e]){r.next=4;break}return u({type:"fetched",payload:s.current[e]}),r.abrupt("return");case 4:return r.prev=4,r.next=7,fetch(e,n);case 7:if((i=r.sent).ok){r.next=10;break}throw new Error(i.statusText);case 10:return r.next=12,i.json();case 12:if(l=r.sent,s.current[e]=l,!t.current){r.next=16;break}return r.abrupt("return");case 16:u({type:"fetched",payload:l}),r.next=24;break;case 19:if(r.prev=19,r.t0=r.catch(4),!t.current){r.next=23;break}return r.abrupt("return");case 23:u({type:"error",payload:r.t0});case 24:case"end":return r.stop()}}),r,null,[[4,19]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){t.current=!0}}}),[e]),d}function W(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2.31",r=_();return z(e?"".concat(r.replace("2.31",s)).concat(e):e,n)}function O(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2.31",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,a=(0,w.useState)({result:[]}),o=(0,r.Z)(a,2),d=o[0],u=o[1],c=(0,w.useState)(0),x=(0,r.Z)(c,2),h=x[0],m=x[1],j=W(e+"?count=".concat(l,"&offset=").concat(h),n,s),v=j.data;return(0,w.useEffect)((function(){if(v&&(u((function(e){return(0,i.Z)((0,i.Z)((0,i.Z)({},e),v),{},{result:[].concat((0,t.Z)(e.result),(0,t.Z)(v.result))})})),v.result.length>=l)){var e=setTimeout((function(){return m((function(e){return e+l}))}),2e3);return function(){return clearTimeout(e)}}}),[v,l]),d}var T=s(9683),E=s(3504),L=s(3859),J=s(2204);function D(e){var n,s,r,t,i,l,d,u,c,x,h=e.subsite,v=e.entries,f=e.comments;return(0,m.jsxs)(a.gC,{divider:(0,m.jsx)(a.cX,{}),children:[(0,m.jsxs)(a.MI,{columns:{base:2,sm:4},spacing:3,justifyContent:"space-between",w:"100%",children:[(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041f\u043e\u0441\u0442\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:null!==(n=null!==(s=null===h||void 0===h||null===(r=h.counters)||void 0===r?void 0:r.entries)&&void 0!==s?s:v)&&void 0!==n?n:"N/A"})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,m.jsx)(o.Jf,{children:null!==(t=null!==(i=null===h||void 0===h||null===(l=h.counters)||void 0===l?void 0:l.comments)&&void 0!==i?i:f)&&void 0!==t?t:"N/A"})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}),(0,m.jsx)(o.Jf,{children:null!==(d=null===h||void 0===h||null===(u=h.counters)||void 0===u?void 0:u.subscriptions)&&void 0!==d?d:"N/A"})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:null!==(c=null===h||void 0===h||null===(x=h.counters)||void 0===x?void 0:x.subscribers)&&void 0!==c?c:"N/A"})]})]}),(0,m.jsxs)(a.MI,{columns:2,spacing:3,justifyContent:"space-between",w:"100%",children:[(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"Plus"}),(0,m.jsx)(o.Jf,{children:(0,m.jsx)(j,{value:null===h||void 0===h?void 0:h.isPlus})})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),(0,m.jsx)(o.Jf,{children:(0,m.jsx)(j,{value:null===h||void 0===h?void 0:h.isVerified})})]})]})]})}function U(e){var n=e.label,s=e.children;return(0,m.jsxs)(a.gC,{align:"flex-start",minW:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:n}),s]})}function M(e){var n=e.data,s=(0,w.useMemo)((function(){var e,s={rating:0,ratingCount:0,comments:0,reposts:0,hits:0,mostHits:((null===n||void 0===n?void 0:n.result)||[])[0],mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,l.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value;s.rating+=t.likes.summ,s.ratingCount+=t.likes.count,s.comments+=t.commentsCount,s.reposts+=Number(t.isRepost),s.hits+=t.hitsCount,t.hitsCount>s.mostHits.hitsCount&&(s.mostHits=t),t.likes.summ>s.mostLiked.likes.summ&&(s.mostLiked=t),t.likes.count-t.likes.summ>s.mostDisliked.likes.count-s.mostDisliked.likes.summ&&(s.mostDisliked=t)}}catch(i){r.e(i)}finally{r.f()}return s}),[n]);return(0,m.jsxs)(a.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,m.jsxs)(a.MI,{columns:3,spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,m.jsx)(b,{children:s.rating}),(0,m.jsx)(b,{label:"\u041e\u0446\u0435\u043d\u043e\u043a",children:s.ratingCount}),(0,m.jsx)(b,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [\u043c\u0438\u043d\u0443\u0441]",children:s.ratingCount-s.rating}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,m.jsx)(o.Jf,{children:s.comments})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:s.hits})]}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u0420\u0435\u043f\u043e\u0441\u0442\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:s.reposts})]})]}),s.mostHits&&(0,m.jsx)(U,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0439",children:(0,m.jsx)(p,{entry:s.mostHits})}),s.mostLiked&&(0,m.jsx)(U,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,m.jsx)(p,{entry:s.mostLiked})}),s.mostDisliked&&(0,m.jsx)(U,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,m.jsx)(p,{entry:s.mostDisliked})})]})}function X(e){var n=e.data,s=(0,w.useMemo)((function(){var e,s={rating:0,ratingCount:0,mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,l.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value;s.rating+=t.likes.summ,s.ratingCount+=t.likes.count,t.likes.summ>s.mostLiked.likes.summ&&(s.mostLiked=t),t.likes.count-t.likes.summ>s.mostDisliked.likes.count-s.mostDisliked.likes.summ&&(s.mostDisliked=t)}}catch(i){r.e(i)}finally{r.f()}return s}),[n]);return(0,m.jsxs)(a.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,m.jsxs)(a.MI,{columns:3,spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,m.jsx)(b,{children:s.rating}),(0,m.jsx)(b,{label:"\u041e\u0446\u0435\u043d\u043e\u043a",children:s.ratingCount}),(0,m.jsx)(b,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [\u043c\u0438\u043d\u0443\u0441]",children:s.ratingCount-s.rating})]}),s.mostLiked&&(0,m.jsx)(U,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,m.jsx)(f,{comment:s.mostLiked})}),s.mostDisliked&&(0,m.jsx)(U,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,m.jsx)(f,{comment:s.mostDisliked})})]})}function B(e){var n=e.data,s=n.years,r=n.months,t=n.days,i=n.hours,l=n.ratingByEntity,o=e.options;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.gC,{w:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:"\u041f\u043e \u0433\u043e\u0434\u0430\u043c"}),(0,m.jsx)(T.$Q,{data:s,options:o})]}),(0,m.jsxs)(a.gC,{w:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:"\u041f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"}),(0,m.jsx)(T.$Q,{data:r,options:o})]}),(0,m.jsxs)(a.gC,{w:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:"\u041f\u043e \u0434\u043d\u044f\u043c"}),(0,m.jsx)(T.$Q,{data:t,options:o})]}),(0,m.jsxs)(a.gC,{w:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:"\u041f\u043e \u0447\u0430\u0441\u0430\u043c"}),(0,m.jsx)(T.Fk,{data:i,options:o})]}),(0,m.jsxs)(a.gC,{w:"100%",children:[(0,m.jsx)(a.X6,{size:"md",children:"\u041e\u0446\u0435\u043d\u043a\u0438"}),(0,m.jsx)(T.x1,{data:l})]})]})}function S(e){var n=e.comments,s=e.entries,r=(0,d.Bs)({plugins:{legend:{display:!1}}}),a=(0,d.Bs)({borderColor:"rgb(49,130,206)",backgroundColor:"rgba(49,130,206,0.4)",borderWidth:1}),o=(0,d.Bs)({borderColor:"rgb(237,137,54)",backgroundColor:"rgba(237,137,54,0.4)",borderWidth:1}),c=(0,d.Bs)((function(){return function(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={0:0,1:0,2:0,3:0,4:0,5:0,6:0},a=(0,i.Z)((0,i.Z)({},r),{},{7:0,8:0,9:0,10:0,11:0}),o={years:{},months:(0,i.Z)({},a),days:(0,i.Z)({},r),hours:(0,i.Z)((0,i.Z)({},r),{},{12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0}),ratingByEntity:{}},d=(0,l.Z)((null===e||void 0===e?void 0:e.result)||[]);try{for(d.s();!(n=d.n()).done;){var u=n.value,c=new Date(1e3*u.date),x=c.getUTCFullYear(),h=c.getUTCMonth(),m=c.getUTCDay(),j=c.getUTCHours();o.years[x]=(o.years[x]||0)+1,o.months[h]=(o.months[h]||0)+1,o.days[m]=(o.days[m]||0)+1,o.hours[j]=(o.hours[j]||0)+1,o.ratingByEntity[u.id]={plus:0,minus:0},o.ratingByEntity[u.id].plus=u.likes.summ,o.ratingByEntity[u.id].minus=u.likes.count-u.likes.summ}}catch(f){d.e(f)}finally{d.f()}var v=(0,t.Z)(Object.values(o.ratingByEntity));return{years:{datasets:[(0,i.Z)({data:(0,t.Z)(Object.values(o.years))},s)],labels:(0,t.Z)(Object.keys(o.years))},months:{datasets:[(0,i.Z)({data:(0,t.Z)(Object.values(o.months))},s)],labels:(0,t.Z)((0,L.w)())},days:{datasets:[(0,i.Z)({data:(0,t.Z)(Object.values(o.days))},s)],labels:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},hours:{datasets:[(0,i.Z)({data:(0,t.Z)(Object.values(o.hours))},s)],labels:(0,t.Z)(Object.keys(o.hours))},ratingByEntity:{datasets:[{data:(0,t.Z)(v.map((function(e){return e.minus}))),label:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(229,62,62, 0.2)",borderColor:"rgb(229,62,62)",borderWidth:1},{data:(0,t.Z)(v.map((function(e){return e.plus}))),label:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(72,187,120, 0.2)",borderColor:"rgb(72,187,120)",borderWidth:1}],labels:(0,t.Z)(Object.keys(o.ratingByEntity))}}}})),x=(0,w.useMemo)((function(){return c(n,a)}),[n,a,c]),h=(0,w.useMemo)((function(){return c(s,o)}),[s,o,c]);return(0,m.jsxs)(u.mQ,{isFitted:!0,variant:"enclosed",w:"100%",children:[(0,m.jsxs)(u.td,{w:"100%",children:[(0,m.jsx)(u.OK,{children:"\u041f\u043e\u0441\u0442\u044b"}),(0,m.jsx)(u.OK,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})]}),(0,m.jsxs)(u.nP,{w:"100%",children:[(0,m.jsx)(u.x4,{w:"100%",children:(0,m.jsx)(B,{data:h,options:r})}),(0,m.jsx)(u.x4,{w:"100%",children:(0,m.jsx)(B,{data:x,options:r})})]})]})}function A(e){var n,s=e.source,r=s.plus,t=s.minus;return(0,m.jsxs)(a.Ug,{spacing:2,children:[(0,m.jsx)(a.xv,{fontSize:"16px",as:"span",color:"green.300",children:r}),(0,m.jsx)(a.xv,{fontSize:"16px",as:"span",color:"red.300",children:t}),(0,m.jsx)(a.xv,{fontSize:"16px",as:"span",color:"gray.500",children:null!==(n=r+t)&&void 0!==n?n:"N/A"})]})}function F(e){var n=e.name,s=e.avatar_url,r=e.id,t=e.children,i=e.size,l=void 0===i?"md":i;return(0,m.jsxs)(a.Ug,{as:"a",href:"https://tjournal.ru/u/".concat(r),target:"_blank",children:[(0,m.jsx)(c.qE,{size:l,name:n,src:s}),(0,m.jsx)(a.xv,{fontSize:"md"===l?"18px":"14px",as:"b",maxW:{base:"150px",md:"180px",lg:"200px"},textOverflow:"ellipsis",overflow:"hidden",children:n}),t]})}function I(e){var n=e.likers;return(0,m.jsx)(x.xJ,{children:(0,m.jsxs)(x.iA,{variant:"simple",size:{base:"sm",md:"md",lg:"lg"},children:[(0,m.jsx)(x.Rn,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0446\u0435\u043d\u043e\u043a \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c"}),(0,m.jsx)(x.hr,{children:(0,m.jsxs)(x.Tr,{children:[(0,m.jsx)(x.Th,{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,m.jsx)(x.Th,{isNumeric:!0,color:"green.300",children:"+"}),(0,m.jsx)(x.Th,{isNumeric:!0,color:"red.300",children:"-"}),(0,m.jsx)(x.Th,{isNumeric:!0,children:"\u0412\u0441\u0435\u0433\u043e"})]})}),(0,m.jsx)(x.p3,{children:(0,t.Z)(Object.entries(n)).sort((function(e,n){var s=(0,r.Z)(e,2),t=(s[0],s[1]),i=(0,r.Z)(n,2),l=(i[0],i[1]);return l.plus+l.minus-(t.plus+t.minus)})).map((function(e){var n=(0,r.Z)(e,2),s=n[0],t=n[1],i=t.name,l=t.avatar_url,a=t.minus,o=t.plus;return(0,m.jsxs)(x.Tr,{children:[(0,m.jsx)(x.Td,{children:(0,m.jsx)(F,{name:i,avatar_url:l,id:s})}),(0,m.jsx)(x.Td,{children:o}),(0,m.jsx)(x.Td,{children:a}),(0,m.jsx)(x.Td,{children:a+o})]},s)}))})]})})}function H(e){var n,s,t,l=e.comments,d=(0,w.useState)({}),u=(0,r.Z)(d,2),c=u[0],x=u[1],j=(0,w.useState)(0),v=(0,r.Z)(j,2),f=v[0],g=v[1],p=W("/comment/likers/".concat(null===(n=((null===l||void 0===l?void 0:l.result)||[])[f])||void 0===n?void 0:n.id),void 0,"1.9").data,b=(0,w.useMemo)((function(){for(var e={plus:(0,i.Z)((0,i.Z)({},c[0]||{plus:0}),{},{id:"0"}),minus:(0,i.Z)((0,i.Z)({},c[0]||{minus:0}),{},{id:"0"}),total:(0,i.Z)((0,i.Z)({},c[0]||{plus:0,minus:0}),{},{id:"0"})},n=0,s=Object.entries(c);n<s.length;n++){var t=(0,r.Z)(s[n],2),l=t[0],a=t[1];a.minus>e.minus.minus&&(e.minus=(0,i.Z)((0,i.Z)({},a),{},{id:l})),a.plus>e.plus.plus&&(e.plus=(0,i.Z)((0,i.Z)({},a),{},{id:l})),a.plus+a.minus>e.total.plus+e.total.minus&&(e.total=(0,i.Z)((0,i.Z)({},a),{},{id:l}))}return e}),[c]);return(0,w.useEffect)((function(){if(p){x((function(e){for(var n=(0,i.Z)({},e),s=0,t=Object.entries(p.result);s<t.length;s++){var l=(0,r.Z)(t[s],2),a=l[0],o=l[1];Reflect.has(n,a)||(n[a]={minus:0,plus:0,avatar_url:"",name:""}),n[a].minus+=Number(o.sign<0),n[a].plus+=Number(o.sign>0),n[a].avatar_url=o.avatar_url,n[a].name=o.name}return n}));var e=setTimeout((function(){return g((function(e){return e+1}))}),2e3);return function(){return clearTimeout(e)}}}),[p]),(0,m.jsxs)(a.gC,{position:"relative",children:[(null===l||void 0===l||null===(s=l.result)||void 0===s?void 0:s.length)>f&&(0,m.jsx)(h.Ex,{size:"xs",isIndeterminate:!0,w:"100%"}),(0,m.jsxs)(a.MI,{columns:{md:2,base:1},spacing:5,justifyContent:"space-between",minW:"100%",children:[!!+b.plus.id&&(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043f\u043b\u044e\u0441\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:(0,m.jsx)(F,{name:b.plus.name,avatar_url:b.plus.avatar_url,id:b.plus.id})}),(0,m.jsx)(o.vh,{pl:"14",children:(0,m.jsx)(A,{source:b.plus})})]}),!!+b.minus.id&&(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432"}),(0,m.jsx)(o.Jf,{children:(0,m.jsx)(F,{name:b.minus.name,avatar_url:b.minus.avatar_url,id:b.minus.id})}),(0,m.jsx)(o.vh,{pl:"14",children:(0,m.jsx)(A,{source:b.minus})})]}),!!+b.total.id&&(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0446\u0435\u043d\u043e\u043a"}),(0,m.jsx)(o.Jf,{children:(0,m.jsx)(F,{name:b.total.name,avatar_url:b.total.avatar_url,id:b.total.id})}),(0,m.jsx)(o.vh,{pl:"14",children:(0,m.jsx)(A,{source:b.total})})]})]}),(null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t.length)<=f&&(0,m.jsx)(I,{likers:c})]})}function K(e){var n,s,r,t,i,l,d=e.subsite,u=e.avatar_url,x=e.rating;return(0,m.jsxs)(a.Ug,{spacing:{base:5,sm:8,md:10},position:"sticky",top:"0",bg:"white",zIndex:"1000",pt:"5",pb:"2",px:{base:2,sm:3,md:4},w:"100%",justifyContent:"center",children:[(0,m.jsx)(c.qE,{name:d.name,size:{base:"xl",md:"2xl"},src:null!==d&&void 0!==d&&null!==(n=d.avatar)&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.uuid?"https://leonardo.osnova.io/".concat(null===d||void 0===d||null===(r=d.avatar)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.uuid,"/-/scale_crop/300x300/-/format/webp/"):u}),(0,m.jsxs)(a.gC,{children:[(0,m.jsx)(a.X6,{size:{base:"md",sm:"lg"},children:d.name}),(0,m.jsxs)(a.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,m.jsx)(b,{children:null!==(i=null!==(l=d.rating)&&void 0!==l?l:x)&&void 0!==i?i:"N/A"}),(0,m.jsxs)(o.kN,{children:[(0,m.jsx)(o.dw,{children:"\u0421\u043e\u0437\u0434\u0430\u043d"}),(0,m.jsx)(o.Jf,{children:(0,k.Z)(d.created)?(0,v.Z)(1e3*d.created,"dd.LL.yy"):"N/A"})]})]})]})]})}J.kL.register(J.uw,J.f$,J.l7,J.ZL,J.od,J.jn,J.Gu,J.Dx,J.u,J.De);var R=function(){var e,n,s,t,i,l,o,d,c,x,h,j,v,f,g,p,b=(0,E.lr)(),k=(0,r.Z)(b,1)[0],y=(0,L.s)(k.get("id")||""),Z=W("/subsite?id=".concat(y)),C=Z.data,N=Z.error,_=O("/user/".concat(y,"/entries"),void 0,"1.9"),z=O("/user/".concat(y,"/comments"),void 0,"1.9"),T=(0,w.useMemo)((function(){var e;return null===_||void 0===_||null===(e=_.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[_]),J=(0,w.useMemo)((function(){var e;return null===z||void 0===z||null===(e=z.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[z]),U=(C||{result:{subsite:{name:(null===z||void 0===z||null===(e=z.result)||void 0===e||null===(n=e.at(0))||void 0===n||null===(s=n.author)||void 0===s?void 0:s.name)||(null===_||void 0===_||null===(t=_.result)||void 0===t||null===(i=t.at(0))||void 0===i||null===(l=i.author)||void 0===l?void 0:l.name)}}}).result.subsite;return(0,m.jsxs)(a.gC,{align:"start",children:[N&&(0,m.jsxs)(a.gC,{align:"start",children:[(0,m.jsxs)(a.X6,{children:["\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u043a\u0440\u044b\u0442"," ",!(null!==z&&void 0!==z&&null!==(o=z.result)&&void 0!==o&&o.length||null!==_&&void 0!==_&&null!==(d=_.result)&&void 0!==d&&d.length)&&(0,m.jsx)(m.Fragment,{children:"\u0438\u043b\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})]}),(0,m.jsx)(a.xv,{fontSize:"12px",color:"gray.500",children:"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u043d\u044b \u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0447\u0435\u0442\u0430"})]}),(0,m.jsx)(K,{subsite:U,avatar_url:(null===z||void 0===z||null===(c=z.result)||void 0===c||null===(x=c.at(0))||void 0===x||null===(h=x.author)||void 0===h?void 0:h.avatar_url)||(null===_||void 0===_||null===(j=_.result)||void 0===j||null===(v=j.at(0))||void 0===v||null===(f=v.author)||void 0===f?void 0:f.avatar_url),rating:T+J}),(0,m.jsxs)(u.mQ,{variant:"soft-rounded",size:{base:"sm",md:"md"},maxW:"100%",children:[(0,m.jsxs)(u.td,{minW:"0",maxW:"100%",overflowX:"auto",sx:{scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},WebkitOverflowScrolling:"touch"},px:"1",children:[(0,m.jsx)(u.OK,{children:"\u041e\u0431\u0437\u043e\u0440"}),(0,m.jsx)(u.OK,{children:"\u041f\u043e\u0441\u0442\u044b"}),(0,m.jsx)(u.OK,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),(0,m.jsx)(u.OK,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"}),(0,m.jsx)(u.OK,{children:"\u0418\u0442\u043e\u0433"})]}),(0,m.jsxs)(u.nP,{children:[(0,m.jsx)(u.x4,{children:(0,m.jsx)(D,{subsite:U,entries:null===_||void 0===_||null===(g=_.result)||void 0===g?void 0:g.length,comments:null===z||void 0===z||null===(p=z.result)||void 0===p?void 0:p.length})}),(0,m.jsx)(u.x4,{children:(0,m.jsx)(a.gC,{align:"flex-start",divider:(0,m.jsx)(a.cX,{}),children:(0,m.jsx)(M,{data:_})})}),(0,m.jsx)(u.x4,{children:(0,m.jsx)(a.gC,{align:"flex-start",divider:(0,m.jsx)(a.cX,{}),children:(0,m.jsx)(X,{data:z})})}),(0,m.jsx)(u.x4,{children:(0,m.jsx)(S,{comments:z,entries:_})}),(0,m.jsx)(u.x4,{children:(0,m.jsx)(H,{comments:z})})]})]})]})}},3859:function(e,n,s){s.d(n,{s:function(){return r},w:function(){return t}});var r=function(e){return+(/(?:u\/)?(\d+)/.exec(e||"")||[])[1]||0},t=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}}}]);
//# sourceMappingURL=482.be5b089c.chunk.js.map