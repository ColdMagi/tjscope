"use strict";(self.webpackChunktjscope=self.webpackChunktjscope||[]).push([[807],{5807:function(e,n,s){s.r(n),s.d(n,{default:function(){return oe}});var r=s(3324),t=s(9712),i=s(7549),l=s(2791),a=s(3504),o=s(3859),u=s(7762),d=s(1197),c=s(5443),x=s(9683),h=s(184);var v=function(e){var n=e.data,s=n.years,r=n.months,i=n.days,l=n.hours,a=n.ratingByEntity,o=e.options;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0433\u043e\u0434\u0430\u043c"}),(0,h.jsx)(x.$Q,{data:s,options:o})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"}),(0,h.jsx)(x.$Q,{data:r,options:o})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0434\u043d\u044f\u043c"}),(0,h.jsx)(x.$Q,{data:i,options:o})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041f\u043e \u0447\u0430\u0441\u0430\u043c"}),(0,h.jsx)(x.Fk,{data:l,options:o})]}),(0,h.jsxs)(t.gC,{w:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:"\u041e\u0446\u0435\u043d\u043a\u0438"}),(0,h.jsx)(x.x1,{data:a})]})]})},j=s(1413),m=s(4925),g=s(2157),f=s(4828),p=s(9382),b=function(e){var n=e.count,s=e.summ,r=Math.abs(n-(n-s)/2);return{minus:r+-1*s,plus:r}},y=["url","hitsCount","intro","date","likes","cover","subsite","title","blocks"];function Z(e){var n=e.data.markdown;return(0,h.jsx)(t.xu,{p:"3",rounded:"lg",borderColor:"gray.300",borderWidth:"1px",children:n})}var k=function(e){var n=e.entry,s=n.url,r=n.hitsCount,i=n.intro,l=n.date,a=n.likes,o=a.count,u=a.summ,d=n.cover,c=n.subsite,x=c.avatar_url,v=c.name,k=n.title,w=n.blocks,C=((0,m.Z)(n,y),b({count:o,summ:u})),P=C.minus,N=C.plus;return(0,h.jsxs)(t.gC,{align:"flex-start",as:"a",href:s,rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(g.qE,{size:"xs",src:x,name:v}),(0,h.jsx)(t.X6,{size:"sm",children:v})]}),(0,h.jsx)(t.xv,{color:"gray.400",as:"time",children:(0,p.Z)(1e3*l,"dd.LL.yy")})]}),(0,h.jsxs)(t.gC,{pl:"8",children:[k&&(0,h.jsx)(t.X6,{size:"sm",children:k}),(0,h.jsx)(t.xv,{children:i}),d&&(0,h.jsx)(f.Ee,{src:d.thumbnailUrl,alt:"",objectFit:"contain",pointerEvents:"none"}),w&&w[0]&&"tweet"===w[0].type&&(0,h.jsx)(Z,(0,j.Z)({},w[0]))]}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.xv,{pl:"8",color:"gray.400",children:[r," \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"]}),(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(t.xv,{color:"red.300",children:P}),(0,h.jsx)(t.xv,{color:"green.300",children:N})]})]})]})};var w=function(e){var n=e.label,s=void 0===n?"\u0420\u0435\u0439\u0442\u0438\u043d\u0433":n,r=e.children;return(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:s}),(0,h.jsx)(c.Jf,{color:"gray.500",children:r})]})};var C=function(e){var n=e.label,s=e.children;return(0,h.jsxs)(t.gC,{align:"flex-start",minW:"100%",children:[(0,h.jsx)(t.X6,{size:"md",children:n}),s]})},P=s(3433);function N(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={0:0,1:0,2:0,3:0,4:0,5:0,6:0},t=(0,j.Z)((0,j.Z)({},r),{},{7:0,8:0,9:0,10:0,11:0}),i={years:{},months:(0,j.Z)({},t),days:(0,j.Z)({},r),hours:(0,j.Z)((0,j.Z)({},r),{},{12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0}),ratingByEntity:{}},l=(0,u.Z)((null===e||void 0===e?void 0:e.result)||[]);try{for(l.s();!(n=l.n()).done;){var a=n.value,d=new Date(1e3*a.date),c=d.getUTCFullYear(),x=d.getUTCMonth(),h=d.getUTCDay(),v=d.getUTCHours();i.years[c]=(i.years[c]||0)+1,i.months[x]=(i.months[x]||0)+1,i.days[h]=(i.days[h]||0)+1,i.hours[v]=(i.hours[v]||0)+1,i.ratingByEntity[a.id]=b(a.likes)}}catch(g){l.e(g)}finally{l.f()}var m=(0,P.Z)(Object.values(i.ratingByEntity));return{years:{datasets:[(0,j.Z)({data:(0,P.Z)(Object.values(i.years))},s)],labels:(0,P.Z)(Object.keys(i.years))},months:{datasets:[(0,j.Z)({data:(0,P.Z)(Object.values(i.months))},s)],labels:(0,P.Z)((0,o.w)())},days:{datasets:[(0,j.Z)({data:(0,P.Z)(Object.values(i.days))},s)],labels:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]},hours:{datasets:[(0,j.Z)({data:(0,P.Z)(Object.values(i.hours))},s)],labels:(0,P.Z)(Object.keys(i.hours))},ratingByEntity:{datasets:[{data:(0,P.Z)(m.map((function(e){return e.minus}))),label:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(229,62,62, 0.2)",borderColor:"rgb(229,62,62)",borderWidth:1},{data:(0,P.Z)(m.map((function(e){return e.plus}))),label:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435",backgroundColor:"rgba(72,187,120, 0.2)",borderColor:"rgb(72,187,120)",borderWidth:1}],labels:(0,P.Z)(Object.keys(i.ratingByEntity))}}}var W=function(e){var n=e.data,s=(0,l.useMemo)((function(){var e,s={rating:0,ratingPlus:0,ratingMinus:0,comments:0,reposts:0,hits:0,mostHits:((null===n||void 0===n?void 0:n.result)||[])[0],mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,u.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value,i=b(t.likes),l=i.minus,a=i.plus;s.rating+=a-l,s.ratingPlus+=a,s.ratingMinus+=l,s.comments+=t.commentsCount,s.reposts+=Number(t.isRepost),s.hits+=t.hitsCount;var o=b(s.mostLiked.likes).plus,d=b(s.mostDisliked.likes).minus;t.hitsCount>s.mostHits.hitsCount&&(s.mostHits=t),a>o&&(s.mostLiked=t),l>d&&(s.mostDisliked=t)}}catch(c){r.e(c)}finally{r.f()}return s}),[n]),r=(0,d.Bs)({plugins:{legend:{display:!1}}}),a=(0,d.Bs)({borderColor:"rgb(237,137,54)",backgroundColor:"rgba(237,137,54,0.4)",borderWidth:1}),o=N(n||{},a);return(0,h.jsxs)(i.mQ,{variant:"enclosed",isFitted:!0,w:"100%",children:[(0,h.jsxs)(i.td,{w:"100%",children:[(0,h.jsx)(i.OK,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,h.jsx)(i.OK,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]}),(0,h.jsxs)(i.nP,{w:"100%",children:[(0,h.jsx)(i.x4,{children:(0,h.jsxs)(t.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,h.jsxs)(t.MI,{columns:{base:2,md:3},spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:s.rating}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043e\u043a [+]",children:s.ratingPlus}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [-]",children:s.ratingMinus}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,h.jsx)(c.Jf,{children:s.comments})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:s.hits})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u0420\u0435\u043f\u043e\u0441\u0442\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:s.reposts})]})]}),s.mostHits&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0439",children:(0,h.jsx)(k,{entry:s.mostHits})}),s.mostLiked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,h.jsx)(k,{entry:s.mostLiked})}),s.mostDisliked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,h.jsx)(k,{entry:s.mostDisliked})})]})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(v,{data:o,options:r})})]})]})};var z=function(e){var n=e.comment,s=n.author,r=s.avatar_url,i=s.name,l=n.date,a=n.likes,o=a.count,u=a.summ,d=n.id,c=n.entry.url,x=n.html,v=b({count:o,summ:u}),j=v.minus,m=v.plus;return(0,h.jsxs)(t.gC,{align:"flex-start",as:"a",href:c+"?comment=".concat(d),rel:"nofollow noopener noreferrer",target:"_blank",p:"3",shadow:"md",borderWidth:"1px",rounded:"md",minW:"100%",spacing:3,children:[(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(g.qE,{size:"xs",src:r,name:i}),(0,h.jsx)(t.X6,{size:"sm",children:i})]}),(0,h.jsx)(t.xv,{color:"gray.400",as:"time",children:(0,p.Z)(1e3*l,"dd.LL.yy")})]}),(0,h.jsx)(t.gC,{pl:"8",children:(0,h.jsx)(t.xv,{dangerouslySetInnerHTML:{__html:x}})}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)("span",{}),(0,h.jsxs)(t.Ug,{children:[(0,h.jsx)(t.xv,{color:"red.300",children:j}),(0,h.jsx)(t.xv,{color:"green.300",children:m})]})]})]})};var O=function(e){var n=e.data,s=(0,l.useMemo)((function(){var e,s={rating:0,ratingPlus:0,ratingMinus:0,mostLiked:((null===n||void 0===n?void 0:n.result)||[])[0],mostDisliked:((null===n||void 0===n?void 0:n.result)||[])[0]},r=(0,u.Z)((null===n||void 0===n?void 0:n.result)||[]);try{for(r.s();!(e=r.n()).done;){var t=e.value,i=b(t.likes),l=i.plus,a=i.minus;s.rating+=l-a,s.ratingPlus+=l,s.ratingMinus+=a;var o=b(s.mostLiked.likes).plus,d=b(s.mostDisliked.likes).minus;l>o&&(s.mostLiked=t),a>d&&(s.mostDisliked=t)}}catch(c){r.e(c)}finally{r.f()}return s}),[n]),r=(0,d.Bs)({plugins:{legend:{display:!1}}}),a=(0,d.Bs)({borderColor:"rgb(49,130,206)",backgroundColor:"rgba(49,130,206,0.4)",borderWidth:1}),o=N(n||{},a);return(0,h.jsxs)(i.mQ,{variant:"enclosed",isFitted:!0,w:"100%",children:[(0,h.jsxs)(i.td,{children:[(0,h.jsx)(i.OK,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),(0,h.jsx)(i.OK,{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]}),(0,h.jsxs)(i.nP,{children:[(0,h.jsx)(i.x4,{children:(0,h.jsxs)(t.gC,{align:"flex-start",w:"100%",pl:"2",spacing:4,children:[(0,h.jsxs)(t.MI,{columns:3,spacing:1,justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:s.rating}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043e\u043a [+]",children:s.ratingPlus}),(0,h.jsx)(w,{label:"\u041e\u0446\u0435\u043d\u043a\u0438 [-]",children:s.ratingMinus})]}),s.mostLiked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043b\u044e\u0441\u043e\u0432",children:(0,h.jsx)(z,{comment:s.mostLiked})}),s.mostDisliked&&(0,h.jsx)(C,{label:"\u041d\u0430\u0438\u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432",children:(0,h.jsx)(z,{comment:s.mostDisliked})})]})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(v,{data:o,options:r})})]})]})},M=s(7552),S={host:"tjournal.ru",version:"2.31"},U=(0,l.createContext)(S),_=function(){return(0,l.useContext)(U)};var E=function(e){var n=e.name,s=e.avatar_url,r=e.id,i=e.children,l=e.size,a=void 0===l?"md":l,o=_().host;return(0,h.jsxs)(t.Ug,{as:"a",href:"https://".concat(o,"/u/").concat(r),target:"_blank",children:[(0,h.jsx)(g.qE,{size:a,name:n,src:s}),(0,h.jsx)(t.xv,{fontSize:"md"===a?"18px":"14px",as:"b",maxW:{base:"150px",md:"180px",lg:"200px"},textOverflow:"ellipsis",overflow:"hidden",children:n}),i]})},L=["label","name","avatar_url","id"];function D(e){var n,s=e.plus,r=e.minus;return(0,h.jsxs)(t.Ug,{spacing:2,children:[(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"green.300",children:s}),(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"red.300",children:r}),(0,h.jsx)(t.xv,{fontSize:"16px",as:"span",color:"gray.500",children:null!==(n=s+r)&&void 0!==n?n:"N/A"})]})}var T=function(e){var n=e.label,s=e.name,r=e.avatar_url,t=e.id,i=(0,m.Z)(e,L);return(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:n}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(E,{name:s,avatar_url:r,id:t})}),(0,h.jsx)(c.vh,{pl:"14",children:(0,h.jsx)(D,(0,j.Z)({},i))})]})},J=s(1089),H=s(3544),X=s(9714),B=s(5777),F=s(8181),A=s(7717),I=s(1358),R=s(7505),K=[{Header:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",accessor:function(e){return e},Cell:function(e){var n=e.value,s=n.name,r=n.avatar_url,t=n.id;return(0,h.jsx)(E,{name:s,avatar_url:r,id:t})}},{Header:"+",accessor:"plus",isNumeric:!0},{Header:"-",accessor:"minus",isNumeric:!0},{Header:"\u0412\u0441\u0435\u0433\u043e",accessor:"total",isNumeric:!0}];var Q=function(e){var n=e.likers,s=(0,l.useMemo)((function(){return(0,P.Z)(Object.values(n))}),[n]),r=(0,I.useTable)({columns:K,data:s},I.useSortBy,I.usePagination),i=r.getTableProps,a=r.getTableBodyProps,o=r.headerGroups,u=r.prepareRow,d=r.page,c=r.canPreviousPage,x=r.canNextPage,v=r.pageOptions,m=r.pageCount,g=r.gotoPage,f=r.nextPage,p=r.previousPage,b=r.setPageSize,y=r.state,Z=y.pageIndex,k=y.pageSize;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(J.iA,(0,j.Z)((0,j.Z)({size:"sm"},i()),{},{children:[(0,h.jsx)(J.Rn,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0446\u0435\u043d\u043e\u043a \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c"}),(0,h.jsx)(J.hr,{children:o.map((function(e){return(0,h.jsx)(J.Tr,(0,j.Z)((0,j.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,h.jsxs)(J.Th,(0,j.Z)((0,j.Z)({},e.getHeaderProps(e.getSortByToggleProps())),{},{isNumeric:e.isNumeric,children:[e.render("Header"),(0,h.jsx)(H.m$.span,{pl:"4",children:e.isSorted?e.isSortedDesc?(0,h.jsx)(R.AS,{"aria-label":"sorted descending"}):(0,h.jsx)(R.$l,{"aria-label":"sorted ascending"}):null})]}))}))}))}))}),(0,h.jsx)(J.p3,(0,j.Z)((0,j.Z)({},a()),{},{children:d.map((function(e){return u(e),(0,h.jsx)(J.Tr,(0,j.Z)((0,j.Z)({},e.getRowProps()),{},{children:e.cells.map((function(e){return(0,h.jsx)(J.Td,(0,j.Z)((0,j.Z)({},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:e.render("Cell")}))}))}))}))}))]})),(0,h.jsxs)(t.kC,{justifyContent:"space-between",m:4,alignItems:"center",w:"100%",children:[(0,h.jsxs)(t.kC,{children:[(0,h.jsx)(X.u,{label:"First Page",children:(0,h.jsx)(B.hU,{onClick:function(){return g(0)},isDisabled:!c,icon:(0,h.jsx)(R.Y4,{h:3,w:3}),mr:2,"aria-label":"First Page"})}),(0,h.jsx)(X.u,{label:"Previous Page",children:(0,h.jsx)(B.hU,{onClick:p,isDisabled:!c,icon:(0,h.jsx)(R.wy,{h:6,w:6}),"aria-label":"Previous Page"})})]}),(0,h.jsxs)(t.kC,{alignItems:"center",children:[(0,h.jsxs)(t.xv,{flexShrink:"0",mr:2,children:[(0,h.jsx)(t.xv,{fontWeight:"bold",as:"span",children:Z+1})," ","of"," ",(0,h.jsx)(t.xv,{fontWeight:"bold",as:"span",children:v.length})]}),(0,h.jsxs)(F.Y2,{ml:2,mr:2,w:16,min:1,max:v.length,onChange:function(e){g(e?+e-1:0)},display:{base:"none",md:"inline-block"},defaultValue:Z+1,children:[(0,h.jsx)(F.zu,{}),(0,h.jsxs)(F.Fi,{children:[(0,h.jsx)(F.WQ,{}),(0,h.jsx)(F.Y_,{})]})]}),(0,h.jsx)(A.Ph,{w:32,value:k,onChange:function(e){b(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return(0,h.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]}),(0,h.jsxs)(t.kC,{children:[(0,h.jsx)(X.u,{label:"Next Page",children:(0,h.jsx)(B.hU,{onClick:f,isDisabled:!x,icon:(0,h.jsx)(R.XC,{h:6,w:6}),"aria-label":"Next Page"})}),(0,h.jsx)(X.u,{label:"Last Page",children:(0,h.jsx)(B.hU,{onClick:function(){return g(m-1)},isDisabled:!x,icon:(0,h.jsx)(R.LZ,{h:3,w:3}),ml:2,"aria-label":"Last page"})})]})]})]})},$=s(1943),q=s(4377),Y=s(4165),G=s(5861);function V(e,n){var s=(0,l.useRef)({}),t=(0,l.useRef)(!1),i={error:void 0,data:void 0},a=(0,l.useReducer)((function(e,n){switch(n.type){case"loading":return(0,j.Z)({},i);case"fetched":return(0,j.Z)((0,j.Z)({},i),{},{data:n.payload});case"error":return(0,j.Z)((0,j.Z)({},i),{},{error:n.payload});default:return e}}),i),o=(0,r.Z)(a,2),u=o[0],d=o[1];return(0,l.useEffect)((function(){if(e&&!e.includes("undefined")){t.current=!1;var r=function(){var r=(0,G.Z)((0,Y.Z)().mark((function r(){var i,l;return(0,Y.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d({type:"loading"}),!s.current[e]){r.next=4;break}return d({type:"fetched",payload:s.current[e]}),r.abrupt("return");case 4:return r.prev=4,r.next=7,fetch(e,n);case 7:if((i=r.sent).ok){r.next=10;break}throw new Error(i.statusText);case 10:return r.next=12,i.json();case 12:if(l=r.sent,s.current[e]=l,!t.current){r.next=16;break}return r.abrupt("return");case 16:d({type:"fetched",payload:l}),r.next=24;break;case 19:if(r.prev=19,r.t0=r.catch(4),!t.current){r.next=23;break}return r.abrupt("return");case 23:d({type:"error",payload:r.t0});case 24:case"end":return r.stop()}}),r,null,[[4,19]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){t.current=!0}}}),[e]),u}function ee(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=_(),t=r.host,i=r.version;return V(e?"".concat("https://api.".concat(t,"/v").concat(i).replace("".concat(i),s||i)).concat(e):e,n)}function ne(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2.31",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=(0,l.useState)({result:[]}),a=(0,r.Z)(i,2),o=a[0],u=a[1],d=(0,l.useState)(0),c=(0,r.Z)(d,2),x=c[0],h=c[1],v=ee(e+"?count=".concat(t,"&offset=").concat(x),n,s),m=v.data;return(0,l.useEffect)((function(){if(m&&(u((function(e){return(0,j.Z)((0,j.Z)((0,j.Z)({},e),m),{},{result:[].concat((0,P.Z)(e.result),(0,P.Z)(m.result))})})),m.result.length>=t)){var e=setTimeout((function(){return h((function(e){return e+t}))}),2e3);return function(){return clearTimeout(e)}}}),[m,t]),o}var se=function(e){var n,i,a,o,d,x=e.comments,v=(0,l.useMemo)((function(){return Worker&&new Worker(new URL(s.p+s.u(386),s.b))}),[]),m=(0,l.useState)([]),g=(0,r.Z)(m,2),f=g[0],p=g[1],b=(0,l.useState)({}),y=(0,r.Z)(b,2),Z=y[0],k=y[1],w=(0,l.useState)(0),C=(0,r.Z)(w,2),N=C[0],W=C[1],z=ee("/comment/likers/".concat(null===(n=((null===x||void 0===x?void 0:x.result)||[])[N])||void 0===n?void 0:n.id),void 0,"1.9").data,O=(0,l.useMemo)((function(){for(var e={plus:(0,j.Z)((0,j.Z)({},Z[0]||{plus:0}),{},{id:"0"}),minus:(0,j.Z)((0,j.Z)({},Z[0]||{minus:0}),{},{id:"0"}),total:(0,j.Z)((0,j.Z)({},Z[0]||{plus:0,minus:0}),{},{id:"0"})},n=0,s=Object.entries(Z);n<s.length;n++){var t=(0,r.Z)(s[n],2),i=t[0],l=t[1];l.minus>e.minus.minus&&(e.minus=(0,j.Z)((0,j.Z)({},l),{},{id:i})),l.plus>e.plus.plus&&(e.plus=(0,j.Z)((0,j.Z)({},l),{},{id:i})),l.plus+l.minus>e.total.plus+e.total.minus&&(e.total=(0,j.Z)((0,j.Z)({},l),{},{id:i}))}return e}),[Z]);return(0,l.useEffect)((function(){if(z){p((function(e){return[].concat((0,P.Z)(e),[z])}));var e=setTimeout((function(){return W((function(e){return e+1}))}),400);return function(){return clearTimeout(e)}}}),[z]),(0,l.useEffect)((function(){v&&(v.onmessage=function(e){return k(e.data)})}),[v]),(0,l.useEffect)((function(){((null===x||void 0===x?void 0:x.result)||[])[N]||(v?v.postMessage(f):k(function(e){var n,s={},t=(0,u.Z)(e);try{for(t.s();!(n=t.n()).done;)for(var i=n.value,l=0,a=Object.entries(i.result);l<a.length;l++){var o=(0,r.Z)(a[l],2),d=o[0],c=o[1];Reflect.has(s,d)||(s[d]={minus:0,plus:0,total:0,avatar_url:"",name:"",id:d}),s[d].minus+=Number(c.sign<0),s[d].plus+=Number(c.sign>0),s[d].total++,s[d].avatar_url=c.avatar_url,s[d].name=c.name}}catch(x){t.e(x)}finally{t.f()}return s}(f)))}),[f,N,x,v]),(0,h.jsxs)(t.gC,{position:"relative",w:"100%",children:[(null===x||void 0===x||null===(i=x.result)||void 0===i?void 0:i.length)>N&&(0,h.jsxs)(t.gC,{w:"100%",align:"flex-end",children:[(0,h.jsx)(M.Ex,{size:"lg",value:100*(N/(null===x||void 0===x||null===(a=x.result)||void 0===a?void 0:a.length)||1),w:"100%",rounded:"md"}),(0,h.jsxs)(t.Ug,{spacing:2,children:[(0,h.jsx)(t.xv,{children:"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c:"}),(0,h.jsx)(t.xv,{children:(0,$.Z)(new Date,(0,q.Z)(new Date,400*((null===x||void 0===x||null===(o=x.result)||void 0===o?void 0:o.length)-N)),{includeSeconds:!0})})]})]}),(0,h.jsxs)(t.MI,{columns:{md:2,base:1},spacing:5,justifyContent:"space-between",minW:"100%",children:[!!(0,P.Z)(Object.entries(Z)).length&&(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),(0,h.jsx)(c.Jf,{children:(0,P.Z)(Object.entries(Z)).length})]}),!!+O.plus.id&&(0,h.jsx)(T,(0,j.Z)((0,j.Z)({},O.plus),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043f\u043b\u044e\u0441\u043e\u0432"})),!!+O.minus.id&&(0,h.jsx)(T,(0,j.Z)((0,j.Z)({},O.minus),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043c\u0438\u043d\u0443\u0441\u043e\u0432"})),!!+O.total.id&&(0,h.jsx)(T,(0,j.Z)((0,j.Z)({},O.total),{},{label:"\u0411\u043e\u043b\u044c\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0446\u0435\u043d\u043e\u043a"}))]}),(null===x||void 0===x||null===(d=x.result)||void 0===d?void 0:d.length)<=N&&(0,h.jsx)(Q,{likers:Z})]})};var re=function(e){var n=e.value;return(0,h.jsx)(h.Fragment,{children:n?"\u0414\u0430":"\u041d\u0435\u0442"})};var te=function(e){var n,s,r,i,l,a,o,u,d,x,v=e.subsite,j=e.entries,m=e.comments;return(0,h.jsxs)(t.gC,{divider:(0,h.jsx)(t.cX,{}),children:[(0,h.jsxs)(t.MI,{columns:{base:2,sm:4},spacing:3,justifyContent:"space-between",w:"100%",children:[(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0441\u0442\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(n=null!==(s=null===v||void 0===v||null===(r=v.counters)||void 0===r?void 0:r.entries)&&void 0!==s?s:j)&&void 0!==n?n:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(i=null!==(l=null===v||void 0===v||null===(a=v.counters)||void 0===a?void 0:a.comments)&&void 0!==l?l:m)&&void 0!==i?i:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}),(0,h.jsx)(c.Jf,{children:null!==(o=null===v||void 0===v||null===(u=v.counters)||void 0===u?void 0:u.subscriptions)&&void 0!==o?o:"N/A"})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"}),(0,h.jsx)(c.Jf,{children:null!==(d=null===v||void 0===v||null===(x=v.counters)||void 0===x?void 0:x.subscribers)&&void 0!==d?d:"N/A"})]})]}),(0,h.jsxs)(t.MI,{columns:2,spacing:3,justifyContent:"space-between",w:"100%",children:[(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"Plus"}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(re,{value:null===v||void 0===v?void 0:v.isPlus})})]}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),(0,h.jsx)(c.Jf,{children:(0,h.jsx)(re,{value:null===v||void 0===v?void 0:v.isVerified})})]})]})]})},ie=s(811);var le=function(e){var n,s,r,i,l,a,o=e.subsite,u=e.avatar_url,d=e.rating;return(0,h.jsxs)(t.Ug,{spacing:{base:5,sm:8,md:10},position:"sticky",top:"0",bg:"white",zIndex:"1000",pt:"5",pb:"2",px:{base:2,sm:3,md:4},w:"100%",justifyContent:"center",children:[(0,h.jsx)(g.qE,{name:o.name,size:{base:"xl",md:"2xl"},src:null!==o&&void 0!==o&&null!==(n=o.avatar)&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.uuid?"https://leonardo.osnova.io/".concat(null===o||void 0===o||null===(r=o.avatar)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.uuid,"/-/scale_crop/300x300/-/format/webp/"):u}),(0,h.jsxs)(t.gC,{children:[(0,h.jsx)(t.X6,{size:{base:"md",sm:"lg"},children:o.name}),(0,h.jsxs)(t.Ug,{justifyContent:"space-between",minW:"100%",children:[(0,h.jsx)(w,{children:null!==(l=null!==(a=o.rating)&&void 0!==a?a:d)&&void 0!==l?l:"N/A"}),(0,h.jsxs)(c.kN,{children:[(0,h.jsx)(c.dw,{children:"\u0421\u043e\u0437\u0434\u0430\u043d"}),(0,h.jsx)(c.Jf,{children:(0,ie.Z)(o.created)?(0,p.Z)(1e3*o.created,"dd.LL.yy"):"N/A"})]})]})]})]})};var ae=function(e){var n,s,r,t,i,l,a=ee("/subsite?id=".concat(e)),o=a.data,u=a.error,d=ne("/user/".concat(e,"/entries"),void 0,"1.9"),c=ne("/user/".concat(e,"/comments"),void 0,"1.9");return{subsite:(o||{result:{subsite:{name:(null===c||void 0===c||null===(n=c.result)||void 0===n||null===(s=n.at(0))||void 0===s||null===(r=s.author)||void 0===r?void 0:r.name)||(null===d||void 0===d||null===(t=d.result)||void 0===t||null===(i=t.at(0))||void 0===i||null===(l=i.author)||void 0===l?void 0:l.name)}}}).result.subsite,subsiteError:u,entries:d,comments:c}};var oe=function(){var e,n,s,u,d,c,x,v,j,m,g,f,p=(0,a.lr)(),b=(0,r.Z)(p,1)[0],y=(0,o.s)(b.get("id")||""),Z=ae(y),k=Z.subsite,w=Z.subsiteError,C=Z.entries,P=Z.comments,N=(0,l.useMemo)((function(){var e;return null===C||void 0===C||null===(e=C.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[C]),z=(0,l.useMemo)((function(){var e;return null===P||void 0===P||null===(e=P.result)||void 0===e?void 0:e.reduce((function(e,n){return e+n.likes.summ}),0)}),[P]);return(0,h.jsxs)(t.gC,{children:[w&&(0,h.jsxs)(t.gC,{align:"start",children:[(0,h.jsxs)(t.X6,{children:["\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u043a\u0440\u044b\u0442"," ",!(null!==P&&void 0!==P&&null!==(e=P.result)&&void 0!==e&&e.length||null!==C&&void 0!==C&&null!==(n=C.result)&&void 0!==n&&n.length)&&(0,h.jsx)(h.Fragment,{children:"\u0438\u043b\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})]}),(0,h.jsx)(t.xv,{fontSize:"12px",color:"gray.500",children:"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u0435\u0435 \u0442\u043e\u0447\u043d\u044b \u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0447\u0435\u0442\u0430"})]}),(0,h.jsx)(le,{subsite:k,avatar_url:(null===k||void 0===k||null===(s=k.avatar)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.url)||(null===P||void 0===P||null===(d=P.result)||void 0===d||null===(c=d.at(0))||void 0===c||null===(x=c.author)||void 0===x?void 0:x.avatar_url)||(null===C||void 0===C||null===(v=C.result)||void 0===v||null===(j=v.at(0))||void 0===j||null===(m=j.author)||void 0===m?void 0:m.avatar_url),rating:N+z}),(0,h.jsxs)(i.mQ,{variant:"soft-rounded",size:{base:"sm",md:"md"},maxW:"100%",w:"100%",children:[(0,h.jsxs)(i.td,{minW:"0",maxW:"100%",overflowX:"auto",sx:{scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},WebkitOverflowScrolling:"touch"},px:"1",children:[(0,h.jsx)(i.OK,{children:"\u041e\u0431\u0437\u043e\u0440"}),(0,h.jsx)(i.OK,{children:"\u041f\u043e\u0441\u0442\u044b"}),(0,h.jsx)(i.OK,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),(0,h.jsx)(i.OK,{children:"\u0418\u0442\u043e\u0433"})]}),(0,h.jsxs)(i.nP,{children:[(0,h.jsx)(i.x4,{children:(0,h.jsx)(te,{subsite:k,entries:null===C||void 0===C||null===(g=C.result)||void 0===g?void 0:g.length,comments:null===P||void 0===P||null===(f=P.result)||void 0===f?void 0:f.length})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(W,{data:C})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(O,{data:P})}),(0,h.jsx)(i.x4,{children:(0,h.jsx)(se,{comments:P})})]})]})]})}},3859:function(e,n,s){s.d(n,{s:function(){return r},w:function(){return t}});var r=function(e){return+(/(?:u\/)?(\d+)/.exec(e||"")||[])[1]||0},t=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}}}]);
//# sourceMappingURL=807.72239380.chunk.js.map